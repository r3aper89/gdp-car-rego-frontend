// reference:
// https://github.com/dev-container/ts/blob/master/.devcontainer/devcontainer.json

// For format details, see https://aka.ms/vscode-remote/devcontainer.json or this file's README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.117.1/containers/typescript-node-12
{
  "name": "Node.js 18 & TypeScript",
  // path to Dockerfile
  "dockerFile": "../Dockerfile",

  "runArgs": [
    "--network=network-gdp-car-rego",
    "--name",
    "typescript-node18",
    "-p",
    "4200:4200" // Expose port 4200
  ],

  // Set *default* container specific settings.json values on container create.
  // "settings": {
  // shell: "/bin/bash"
  // "terminal.integrated.shell.linux": "/bin/bash"
  // },

  // Add the IDs of extensions you want installed when the container is created.
  // "extensions": [
  //   "esbenp.prettier-vscode",
  //   "usernamehw.errorlens",
  //   "formulahendry.auto-rename-tag",
  //   "angular.ng-template",
  //   "streetsidesoftware.code-spell-checker",
  //   "oderwat.indent-rainbow",
  //   "oderwat.indent-rainbow"
  // ],

  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  // 4200 = angular, 3000 = react, 3001 = vue
  "forwardPorts": [4200],

  // Use 'postCreateCommand' to run commands after the container is created.
  // "postCreateCommand": "yarn install",

  // install install npm and angular

  "postCreateCommand": "npm install -g @angular/cli@16"
  // "postCreateCommand": "npm install",

  // Uncomment to connect as a non-root user. See https://aka.ms/vscode-remote/containers/non-root.
  // "remoteUser": "node"
  // "configurations": [
  //   {
  //     "name": "ng serve",
  //     "type": "chrome",
  //     "request": "launch",
  //     "preLaunchTask": "npm: start",
  //     "url": "http://localhost:4200/"
  //   },
  //   {
  //     "name": "ng test",
  //     "type": "chrome",
  //     "request": "launch",
  //     "preLaunchTask": "npm: test",
  //     "url": "http://localhost:9876/debug.html"
  //   }
  // ],

  // "tasks": [
  //   {
  //     "type": "npm",
  //     "script": "start",
  //     "isBackground": true,
  //     "problemMatcher": {
  //       "owner": "typescript",
  //       "pattern": "$tsc",
  //       "background": {
  //         "activeOnStart": true,
  //         "beginsPattern": {
  //           "regexp": "(.*?)"
  //         },
  //         "endsPattern": {
  //           "regexp": "bundle generation complete"
  //         }
  //       }
  //     }
  //   },
  //   {
  //     "type": "npm",
  //     "script": "test",
  //     "isBackground": true,
  //     "problemMatcher": {
  //       "owner": "typescript",
  //       "pattern": "$tsc",
  //       "background": {
  //         "activeOnStart": true,
  //         "beginsPattern": {
  //           "regexp": "(.*?)"
  //         },
  //         "endsPattern": {
  //           "regexp": "bundle generation complete"
  //         }
  //       }
  //     }
  //   }
  // ]
}
